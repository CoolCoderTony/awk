% vim: ts=4 sts=4 sw=4 et tw=75
% preamble here.

\documentclass[nofonts, oneside]{ctexbook}

\usepackage{geometry}
\usepackage{fontspec}
\usepackage{xeCJK}
% for tikz
\usepackage{tikz}
\usepackage{hyperref}
%\usepackage{fancyhdr}
\usepackage{verbatim}
% for float's caption
\usepackage{caption}
% for exercise 
\usepackage{theorem}

% from package geometry
% 为边注加边框
% FIXME: 当文档设置为双面时, 偶数页无法显示边注
\let\oldmarginpar=\marginpar
\renewcommand\marginpar[1]{%
    \oldmarginpar{\framebox{#1}}%
}
\geometry{%
    bottom = 2cm,
    outer = 2.5cm,
    inner = 2.5cm,
    marginparsep = 0.5cm
}

% page style from package fancyhdr
%\pagestyle{fancy}
%\fancyhf{}
%\fancyhead[EL]{\thepage}
%\fancyhead[ER]{\nouppercase{\leftmark}}
%\fancyhead[OR]{\thepage}
%\fancyhead[OL]{\nouppercase{\rightmark}}

% from package hyperref
\hypersetup{
    bookmarksnumbered = true
}

% from package fontspec and xeCJK
\setCJKmainfont{Droid Sans Fallback}
\setCJKsansfont{WenQuanYi Zen Hei}
\setCJKmonofont{AR PL UKai CN}
\setmainfont{Century Schoolbook L}
\setsansfont{FreeSans}
% "Mapping={}" make quote symbol straight
\setmonofont[Mapping={}]{Courier 10 Pitch}

% the name of file or directory
\newcommand\filename[1]{\texttt{#1}}

% the content of file
\newenvironment{file}%
{\verbatim}%
{\endverbatim}

% awk program, from package verbatim
\newenvironment{awkcode}%
{\verbatim}%
{\endverbatim}

% shell command, from package verbatim
\newenvironment{shell}%
{\verbatim}%
{\endverbatim}

% pattern for many situations
\newenvironment{pattern}%
{\begin{quotation}}%
{\end{quotation}}

% environment for summary
\newenvironment{summary}[1]
{
    \begin{center}
        \rule{\textwidth}{2.0pt}
    \end{center}
    \vspace{-2.0em}
    \begin{center} \Large{#1} \end{center}%
}
{
    \vspace{-1.2em}
    \begin{center}
        \rule{\textwidth}{2.0pt}
    \end{center}
}

% term in English
\newcommand\term[1]{\textit{#1}}
% term in Chinese
\newcommand\cterm[1]{\textbf{#1}}

% subsection unnumbered
\CTEXsetup[number={}]{subsection}

% word that shows frequently
\newcommand\awk{\texttt{awk}}
\newcommand\print{\texttt{print}}
\newcommand\printf{\texttt{printf}}
\newcommand\nf{\texttt{NF}}
\newcommand\nr{\texttt{NR}}
\newcommand\AND{\texttt{\&\&}}
\newcommand\OR{\texttt{||}}
\newcommand\NOT{\texttt{!}}
\newcommand\BEGIN{\texttt{BEGIN}}
\newcommand\END{\texttt{END}}
\newcommand\length{\texttt{length}}
\newcommand\while{\texttt{while}}
\newcommand\for{\texttt{for}}
\newcommand\patact{\ \mbox{模式}\mbox{--}动作\ }
\newcommand\stmt{\textit{statements}}
\newcommand\expr{\textit{expression}}
\newcommand\regexpr{\textit{regular expression}}
\newcommand\pat{\textit{pattern}}
\newcommand\fs{\texttt{FS}}
\newcommand\OFS{\texttt{OFS}}
\renewcommand\break{\texttt{break}}
\newcommand\ctn{\texttt{continue}}
\newcommand\fmt{\textit{format}}

\theoremstyle{plain}
\theoremheaderfont{\bfseries}
\theorembodyfont{\normalfont}
\newtheorem{exercise}{Exercise}[chapter]

\title{AWK 程序设计语言}
\author{Alfred V.Aho \and Brian W.Kernighan \and Peter J.Weinberger \and
    \url{https://github.com/wuzhouhui/awk}
}
